<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EverOn Bitcoin Ticker ‚Äì Firmware Versions</title>
  <style>
    :root {
      --primary: #0078d7;
      --primary-dark: #005ea3;
      --muted: #777;
      --bg: #fff;
      --text: #1a1a1a;
    }
    * { box-sizing: border-box; }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 { font-size: 1.9rem; margin-bottom: 0.2rem; }
    h2 { font-size: 1.1rem; color: var(--muted); margin: 1rem 0; }

    table {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      border-collapse: collapse;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    th, td { padding: 14px 16px; border-bottom: 1px solid #eee; }
    th { background: #f3f3f3; font-weight: 600; }
    tr:last-child td { border-bottom: none; }
    tr:hover td { background: #fafafa; }

    .status-active { color: var(--primary); font-weight: 600; }
    .status-obsolete { color: #999; }

    .download-btn {
      background: var(--primary);
      color: white;
      padding: 8px 14px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 0.9rem;
      display: inline-block;
      transition: background 0.2s ease;
    }
    .download-btn:hover { background: var(--primary-dark); }

    footer { margin-top: 40px; font-size: 0.8rem; color: var(--muted); }

    @media (max-width: 600px) {
      table, thead, tbody, th, td, tr { display: block; }
      thead { display: none; }
      tr {
        background: white;
        margin-bottom: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.05);
        padding: 12px;
      }
      td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border: none;
      }
      td::before {
        content: attr(data-label);
        font-weight: 600;
        color: #555;
      }
      .download-btn {
        width: 100%;
        text-align: center;
        padding: 10px 0;
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>
  <h1>üöÄ EverOn Bitcoin Ticker</h1>
  <h2>Firmware Version Table</h2>

  <table id="firmwareTable">
    <thead>
      <tr><th>Version</th><th>Status</th><th>Download</th></tr>
    </thead>
    <tbody id="tableBody">
      <tr><td colspan="3">Loading...</td></tr>
    </tbody>
  </table>

  <p style="margin-top:16px;">
    üìÑ <a href="version.json" target="_blank">version.json</a> ‚Äì for OTA check
  </p>

  <footer>¬© 2025 EverOn Labs. All rights reserved.</footer>

  <script>
    async function loadFirmwareTable() {
      try {
        const res = await fetch('version.json');
        const data = await res.json();

        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';

        data.firmwares.forEach(fw => {
          const tr = document.createElement('tr');

          const versionTd = document.createElement('td');
          versionTd.setAttribute('data-label', 'Version');
          versionTd.textContent = fw.version;

          const statusTd = document.createElement('td');
          statusTd.setAttribute('data-label', 'Status');
          statusTd.textContent = fw.status === 'active' ? 'Active' : 'Obsoleted';
          statusTd.className = fw.status === 'active' ? 'status-active' : 'status-obsolete';

          const downloadTd = document.createElement('td');
          downloadTd.setAttribute('data-label', 'Download');
          const a = document.createElement('a');
          a.href = fw.firmware_url;
          a.textContent = 'Download';
          a.className = 'download-btn';
          a.setAttribute('download', '');
          downloadTd.appendChild(a);

          tr.appendChild(versionTd);
          tr.appendChild(statusTd);
          tr.appendChild(downloadTd);
          tbody.appendChild(tr);
        });
      } catch (err) {
        console.error(err);
        document.getElementById('tableBody').innerHTML =
          '<tr><td colspan="3">‚ùå Failed to load version.json</td></tr>';
      }
    }

    loadFirmwareTable();
  </script>
</body>
</html>
